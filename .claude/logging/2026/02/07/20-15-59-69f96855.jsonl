{"ts": "2026-02-07T20:15:59.421860", "type": "SessionStart", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "hook_event_name": "SessionStart", "source": "startup"}}
{"ts": "2026-02-07T20:15:59.468606", "type": "UserPromptSubmit", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "UserPromptSubmit", "prompt": "Use the KOI MCP search tool with the query 'ecocredit registry' to find registry-related discussions. Return the complete raw results with all fields."}}
{"ts": "2026-02-07T20:16:11.981050", "type": "PreToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PreToolUse", "tool_name": "Bash", "tool_input": {"command": "claude mcp search --server koi 2>/dev/null || echo \"Checking MCP configuration...\"", "timeout": 10000, "description": "Check KOI MCP availability"}, "tool_use_id": "toolu_01HTXuEhttsQSVEacR31PEnt"}}
{"ts": "2026-02-07T20:16:17.039165", "type": "PreToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PreToolUse", "tool_name": "Glob", "tool_input": {"pattern": ".claude/settings.json"}, "tool_use_id": "toolu_0181bKocaMAHufG6mChVnWBF"}}
{"ts": "2026-02-07T20:16:17.213901", "type": "PostToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PostToolUse", "tool_name": "Glob", "tool_input": {"pattern": ".claude/settings.json"}, "tool_response": {"filenames": ["/home/ygg/Workspace/regenai/regen-heartbeat/.claude/settings.json"], "durationMs": 134, "numFiles": 1, "truncated": false}, "tool_use_id": "toolu_0181bKocaMAHufG6mChVnWBF"}}
{"ts": "2026-02-07T20:16:17.449933", "type": "PreToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PreToolUse", "tool_name": "Glob", "tool_input": {"pattern": ".mcp.json"}, "tool_use_id": "toolu_01LVkxFwbgeCpjT26F2h5vpH"}}
{"ts": "2026-02-07T20:16:17.612473", "type": "PostToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PostToolUse", "tool_name": "Glob", "tool_input": {"pattern": ".mcp.json"}, "tool_response": {"filenames": [], "durationMs": 125, "numFiles": 0, "truncated": false}, "tool_use_id": "toolu_01LVkxFwbgeCpjT26F2h5vpH"}}
{"ts": "2026-02-07T20:16:21.829381", "type": "PreToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PreToolUse", "tool_name": "Read", "tool_input": {"file_path": "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/settings.json"}, "tool_use_id": "toolu_01E8vm6XNVpVd6nwrqNMhGkC"}}
{"ts": "2026-02-07T20:16:21.869809", "type": "PostToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PostToolUse", "tool_name": "Read", "tool_input": {"file_path": "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/settings.json"}, "tool_response": {"type": "text", "file": {"filePath": "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/settings.json", "content": "{\n  \"hooks\": {\n    \"UserPromptSubmit\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"bash .claude/hooks/git-status.sh\"\n          }\n        ]\n      }\n    ]\n  },\n  \"extraKnownMarketplaces\": {\n    \"time-awareness\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"linuxiscool/claude-plugins-public\"\n      }\n    },\n    \"regen\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"gaiaaiagent/regen-ai-claude\"\n      }\n    },\n    \"planning\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"OthmanAdi/planning-with-files\"\n      }\n    }\n\n  },\n  \"enabledPlugins\": {\n    \"temporal@linuxiscool-claude-plugins-public\": true,\n    \"koi@regen-ai\": true,\n    \"ledger@regen-ai\": true,\n    \"planning-with-files@planning-with-files\": true\n  }\n}\n", "numLines": 43, "startLine": 1, "totalLines": 43}}, "tool_use_id": "toolu_01E8vm6XNVpVd6nwrqNMhGkC"}}
{"ts": "2026-02-07T20:16:29.818293", "type": "PreToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PreToolUse", "tool_name": "Task", "tool_input": {"description": "Search KOI MCP for ecocredit registry", "prompt": "I need to find what MCP tools are available from the KOI plugin in this project. Look at:\n1. The plugin configuration - check if there's a plugin manifest or tool definitions for the \"koi@regen-ai\" plugin\n2. Check .claude/plugins/ or any cached plugin data\n3. Look at the KOI MCP tool reference documentation at content/docs/reference/koi-mcp-tools.md\n4. Search for any files that describe the KOI MCP tools available\n\nReturn the exact tool names and how they should be invoked.", "subagent_type": "Explore"}, "tool_use_id": "toolu_01AjctLYTEUNj9QwD6vNb56D"}}
{"ts": "2026-02-07T20:16:32.512039", "type": "PreToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PreToolUse", "tool_name": "Glob", "tool_input": {"pattern": "**/*.json", "path": "/home/ygg/Workspace/regenai/regen-heartbeat/.claude"}, "tool_use_id": "toolu_011jyY2QkRbRek2EvuZD9NXo"}}
{"ts": "2026-02-07T20:16:32.691450", "type": "PostToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PostToolUse", "tool_name": "Glob", "tool_input": {"pattern": "**/*.json", "path": "/home/ygg/Workspace/regenai/regen-heartbeat/.claude"}, "tool_response": {"filenames": ["/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/bioregion/cascadia.character.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/gaia/aquarius.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/regen/advocate.character.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/gaia/genesis.character.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/gaia/terranova.character.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/gaia/gaia.character.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/gaia/astraea.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/regen/facilitator.character.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/regen/voiceofnature.character.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/regen/regenai.character.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/regen/governor.character.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/characters/regen/narrator.character.json", "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/settings.json"], "durationMs": 141, "numFiles": 13, "truncated": false}, "tool_use_id": "toolu_011jyY2QkRbRek2EvuZD9NXo"}}
{"ts": "2026-02-07T20:16:35.155853", "type": "PreToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PreToolUse", "tool_name": "Glob", "tool_input": {"pattern": "koi*", "path": "/home/ygg/Workspace/regenai/regen-heartbeat/content/docs/reference"}, "tool_use_id": "toolu_016imVVnqtvXu6pU6Utc5zSx"}}
{"ts": "2026-02-07T20:16:35.329701", "type": "PostToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PostToolUse", "tool_name": "Glob", "tool_input": {"pattern": "koi*", "path": "/home/ygg/Workspace/regenai/regen-heartbeat/content/docs/reference"}, "tool_response": {"filenames": ["/home/ygg/Workspace/regenai/regen-heartbeat/content/docs/reference/koi-mcp-tools.md"], "durationMs": 133, "numFiles": 1, "truncated": false}, "tool_use_id": "toolu_016imVVnqtvXu6pU6Utc5zSx"}}
{"ts": "2026-02-07T20:16:35.436491", "type": "PreToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PreToolUse", "tool_name": "Read", "tool_input": {"file_path": "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/settings.json"}, "tool_use_id": "toolu_01K2aQbn6CVkEvsC8eA1JzpL"}}
{"ts": "2026-02-07T20:16:35.477121", "type": "PostToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PostToolUse", "tool_name": "Read", "tool_input": {"file_path": "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/settings.json"}, "tool_response": {"type": "text", "file": {"filePath": "/home/ygg/Workspace/regenai/regen-heartbeat/.claude/settings.json", "content": "{\n  \"hooks\": {\n    \"UserPromptSubmit\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"bash .claude/hooks/git-status.sh\"\n          }\n        ]\n      }\n    ]\n  },\n  \"extraKnownMarketplaces\": {\n    \"time-awareness\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"linuxiscool/claude-plugins-public\"\n      }\n    },\n    \"regen\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"gaiaaiagent/regen-ai-claude\"\n      }\n    },\n    \"planning\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"OthmanAdi/planning-with-files\"\n      }\n    }\n\n  },\n  \"enabledPlugins\": {\n    \"temporal@linuxiscool-claude-plugins-public\": true,\n    \"koi@regen-ai\": true,\n    \"ledger@regen-ai\": true,\n    \"planning-with-files@planning-with-files\": true\n  }\n}\n", "numLines": 43, "startLine": 1, "totalLines": 43}}, "tool_use_id": "toolu_01K2aQbn6CVkEvsC8eA1JzpL"}}
{"ts": "2026-02-07T20:16:36.657664", "type": "PreToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PreToolUse", "tool_name": "Glob", "tool_input": {"pattern": "**/*settings*", "path": "/home/ygg/Workspace/regenai/regen-heartbeat/.claude"}, "tool_use_id": "toolu_011EtpTRVgZkvP7Rc8TYN6iW"}}
{"ts": "2026-02-07T20:16:36.830401", "type": "PostToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PostToolUse", "tool_name": "Glob", "tool_input": {"pattern": "**/*settings*", "path": "/home/ygg/Workspace/regenai/regen-heartbeat/.claude"}, "tool_response": {"filenames": ["/home/ygg/Workspace/regenai/regen-heartbeat/.claude/settings.json"], "durationMs": 127, "numFiles": 1, "truncated": false}, "tool_use_id": "toolu_011EtpTRVgZkvP7Rc8TYN6iW"}}
{"ts": "2026-02-07T20:16:45.538469", "type": "PreToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PreToolUse", "tool_name": "Read", "tool_input": {"file_path": "/home/ygg/Workspace/regenai/regen-heartbeat/content/docs/reference/koi-mcp-tools.md"}, "tool_use_id": "toolu_019DKrZ6J5dEg79QrzWyqnfF"}}
{"ts": "2026-02-07T20:16:46.181804", "type": "PostToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PostToolUse", "tool_name": "Read", "tool_input": {"file_path": "/home/ygg/Workspace/regenai/regen-heartbeat/content/docs/reference/koi-mcp-tools.md"}, "tool_response": {"type": "text", "file": {"filePath": "/home/ygg/Workspace/regenai/regen-heartbeat/content/docs/reference/koi-mcp-tools.md", "content": "---\ntitle: KOI MCP Tool Reference\ndescription: Complete reference for all tools in the Regen KOI MCP server\n---\n\n# KOI MCP Tool Reference\n\nThe Regen KOI (Knowledge Organization Infrastructure) MCP server provides twenty-three tools for accessing Regen Network's comprehensive knowledge base. These tools span search capabilities, code graph queries, entity resolution, repository exploration, metadata operations, and system utilities.\n\nKOI indexes knowledge from twelve active sensors monitoring platforms including GitHub, GitLab, Discourse forums, Medium, Telegram, Discord, Twitter, podcasts, Notion, and the Regen blockchain itself. The system maintains 48,000+ documents, 26,768 code entities, and 614,000+ entity-chunk associations in a unified knowledge graph.\n\nThis reference documents each tool with its parameters, return format, usage examples, and role in digest generation workflows.\n\n---\n\n## Search & Discovery\n\n### search\n\nThe primary search tool for the Regen Network knowledge base. Uses the backend's Hybrid RAG system which automatically combines vector search (semantic similarity via BGE embeddings), entity search (entity-chunk links with 614K+ associations), and keyword search (lexical matching). Results are ranked using Weighted Average Fusion with entity boosting.\n\nThis is the most powerful and flexible search tool \u2014 it understands natural language queries, recognizes entity names, respects date filters, and automatically optimizes the search strategy based on query content.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `query` | string | **required** | Natural language search query (1-500 characters) |\n| `intent` | enum | `general` | Query intent for optimized retrieval: `general`, `person_activity`, `person_bio`, `technical_howto`, `concept_explain` |\n| `source` | string | \u2014 | Filter by data source (e.g., `notion`, `github`, `discourse`). Supports prefix matching. |\n| `sort_by` | enum | `relevance` | Sort order: `relevance`, `date_desc` (newest first), `date_asc` (oldest first) |\n| `limit` | number | 10 | Maximum results to return (1-50) |\n| `published_from` | string | \u2014 | Filter: published on/after this date (YYYY-MM-DD) |\n| `published_to` | string | \u2014 | Filter: published on/before this date (YYYY-MM-DD) |\n| `include_undated` | boolean | false | Include documents with no publication date when using date filters |\n\n**Intent Types:**\n\nThe `intent` parameter enables intent-aware retrieval for better results on specific query types:\n\n- **`general`**: Standard hybrid search (default)\n- **`person_activity`**: \"What is X working on?\" queries \u2014 triggers author search to find docs **authored by** the person\n- **`person_bio`**: \"Who is X?\" queries \u2014 prioritizes biographical content\n- **`technical_howto`**: \"How do I...?\" implementation questions \u2014 prioritizes code and technical docs\n- **`concept_explain`**: \"What is X?\" conceptual questions \u2014 prioritizes explanatory content\n\n**Return Shape:**\n\nReturns markdown-formatted results with document snippets, similarity scores, sources, and URLs. Each result includes the document title, content preview, publication date, and source platform.\n\n**Example:**\n\n```\nsearch(\n  query=\"governance proposal voting procedures\",\n  intent=\"technical_howto\",\n  source=\"github\",\n  limit=10\n)\n```\n\n**Digest Usage:**\n\nThe `search` tool is the workhorse of digest generation. Use it to:\n\n- Find recent activity by date range: `search(query=\"...\", published_from=\"2026-01-27\", published_to=\"2026-02-03\")`\n- Discover what people are working on: `search(query=\"Gregory Landua\", intent=\"person_activity\")`\n- Retrieve conceptual explanations: `search(query=\"credit retirement\", intent=\"concept_explain\")`\n- Filter to specific platforms: `search(query=\"governance\", source=\"discourse\")`\n\nFor weekly digests, combine date filtering with source filtering to segment activity by platform. For personalized summaries, use `intent=\"person_activity\"` to find contributions from specific people.\n\n---\n\n### search_github_docs\n\nSearch Regen Network GitHub repositories for documentation, README files, configuration files, and technical content. Searches `regen-ledger` (blockchain), `regen-web` (frontend), `regen-data-standards` (schemas), and `regenie-corpus` (documentation corpus).\n\nThis tool is specialized for code documentation and repository-level technical content. For semantic search across all knowledge sources, use the `search` tool instead.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `query` | string | **required** | Search query (1-300 characters) |\n| `repository` | enum | all repos | Filter by specific repo: `regen-ledger`, `regen-web`, `regen-data-standards`, `regenie-corpus` |\n| `limit` | number | 10 | Maximum results (1-20) |\n\n**Return Shape:**\n\nReturns markdown-formatted list of matching documents with file paths, repository names, and content previews.\n\n**Example:**\n\n```\nsearch_github_docs(\n  query=\"ecocredit module architecture\",\n  repository=\"regen-ledger\",\n  limit=5\n)\n```\n\n**Digest Usage:**\n\nUse this tool when generating digests that focus on code changes, technical documentation updates, or repository-specific activity. Ideal for developer-focused digests where you need to highlight changes to specs, README files, or architectural documentation.\n\n---\n\n### generate_weekly_digest\n\nGenerate a markdown digest of Regen Network activity and discussions for a specified time period. This tool aggregates data from multiple sources including Discourse forum discussions, GitHub activity (commits, PRs, issues), on-chain governance proposals and votes, credit issuance/retirement metrics, and community channels.\n\nThe output is a curated markdown brief with executive summary, governance analysis, community discussions, and on-chain metrics. This is a condensed overview \u2014 use `get_notebooklm_export` for full content with complete forum posts and Notion pages.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `start_date` | string | 7 days ago | Start of date range (YYYY-MM-DD) |\n| `end_date` | string | today | End of date range (YYYY-MM-DD) |\n| `save_to_file` | boolean | false | Save to file on disk |\n| `output_path` | string | auto | Custom file path (if `save_to_file=true`). Defaults to `weekly_digest_YYYY-MM-DD.md` |\n| `format` | enum | `markdown` | Output format: `markdown` (human-readable report) or `json` (structured data) |\n\n**Return Shape:**\n\nReturns a markdown digest with sections for highlights, activity by module, governance updates, community discussions, and on-chain metrics. If `save_to_file=true`, also saves to disk and returns the file path.\n\n**Example:**\n\n```\ngenerate_weekly_digest(\n  start_date=\"2026-01-27\",\n  end_date=\"2026-02-03\",\n  save_to_file=true,\n  output_path=\"/tmp/weekly.md\"\n)\n```\n\n**Digest Usage:**\n\nThis tool can serve as a template or starting point for custom digest generation. Examine its output structure to understand what sections are useful, then build your own digest workflows using the lower-level search tools for more control.\n\n---\n\n### get_notebooklm_export\n\nGet the full NotebookLM export with complete content including full forum thread posts, complete Notion page content (all chunks), enriched URLs, and detailed source material. Automatically saves to a local file to avoid bloating LLM context. Returns the file path and summary stats.\n\nThis is the comprehensive version of digest content \u2014 use this when you need the full text of everything, not summaries.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `output_path` | string | auto | Custom file path for saving. Defaults to `notebooklm_export_YYYY-MM-DD.md` |\n\n**Return Shape:**\n\nReturns the file path and summary statistics (total word count, document count, sources). The actual content is written to the file, not returned inline.\n\n**Example:**\n\n```\nget_notebooklm_export(output_path=\"/tmp/export.md\")\n```\n\n**Digest Usage:**\n\nUse this tool when you need to archive a full snapshot of the knowledge base for external processing (like NotebookLM for podcast generation), or when you want to perform deep analysis on complete documents rather than summaries.\n\n---\n\n### get_full_document\n\nRetrieve the complete content of a document by its RID (Resource Identifier) and save it to a local file. Useful for getting full text of documents found via search without bloating the LLM context window.\n\nSupports chunk RID resolution (automatically resolves chunk references to parent documents), privacy filtering (respects authentication), and chunk reassembly fallback (reconstructs documents from chunks if needed).\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `rid` | string | **required** | Document RID to retrieve (can be base doc or chunk RID) |\n| `output_path` | string | `document_<hash>.md` | Custom file path for saving |\n| `include_metadata_header` | boolean | true | Include YAML frontmatter with rid, title, url, source, published_at |\n\n**Return Shape:**\n\nReturns a summary with file path, file size, word count, source platform, and content source strategy (direct, chunks, or legacy_chunks). The document content is written to the file.\n\n**Example:**\n\n```\nget_full_document(\n  rid=\"orn:notion.page:regen/2f725b77-eda1-807d-a63e-c43e6145f7f1\",\n  output_path=\"/tmp/meeting-notes.md\",\n  include_metadata_header=true\n)\n```\n\n**Digest Usage:**\n\nUse this tool after running `search` to retrieve the complete text of high-value documents identified in search results. This is particularly useful for deep dives on specific topics or for including full source citations in premium digests.\n\n---\n\n## Graph & Entities\n\n### query_code_graph\n\nSearch the code knowledge graph with supported query types for exploring entities, relationships, modules, concepts, and call graphs. This tool queries the Apache AGE graph database directly, providing precise access to code structure and relationships.\n\nUse this for impact analysis, understanding code relationships, finding documentation for specific code entities, and tracing dependencies.\n\n**Parameters:**\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| `query_type` | enum | **Yes** | Type of graph query to execute (see Query Types below) |\n| `entity_name` | string | Conditional | Name of entity to search for |\n| `entity_type` | string | Conditional | Type of entity (Function, Struct, Interface, Handler, Keeper, etc.) |\n| `doc_path` | string | No | Reserved (doc\u2192entity queries not currently supported via `/graph`) |\n| `repo_name` | string | No | Filter by repository name |\n| `module_name` | string | Conditional | Name of module/package |\n| `from_entity` | string | Conditional | Starting entity name for trace_call_chain |\n| `to_entity` | string | Conditional | Target entity name for trace_call_chain |\n| `limit` | number | 50 | Maximum number of results (1-200) |\n| `offset` | number | 0 | Number of results to skip for pagination |\n| `max_depth` | number | 4 | Maximum depth for call chain tracing (1-8) |\n\n**Query Types:**\n\n| query_type | Description | Required Params |\n|------------|-------------|-----------------|\n| `list_repos` | List all indexed repositories | None |\n| `find_by_type` | Find all entities of a specific type | `entity_type` |\n| `search_entities` | Search for entities by name | `entity_name` |\n| `keeper_for_msg` | Find keeper that handles a message | `entity_name` |\n| `msgs_for_keeper` | Find messages handled by keeper | `entity_name` |\n| `related_entities` | Find related entities | `entity_name` |\n| `list_entity_types` | List all entity types with counts | None |\n| `get_entity_stats` | Get comprehensive statistics | None |\n| `list_concepts` | List available high-level concepts | None |\n| `explain_concept` | Explain a concept | `entity_name` |\n| `find_concept_for_query` | Find relevant concepts for a query | `entity_name` |\n| `find_callers` | Find all functions that call this entity | `entity_name` |\n| `find_callees` | Find all functions called by this entity | `entity_name` |\n| `find_call_graph` | Get local call graph (callers + callees) | `entity_name` |\n| `list_modules` | List all modules in a repo | `repo_name` (optional) |\n| `get_module` | Get details for a specific module | `module_name` |\n| `search_modules` | Search modules by keyword | `entity_name` |\n| `module_entities` | Get entities in a module | `module_name` |\n| `module_for_entity` | Find module containing entity | `entity_name` |\n| `trace_call_chain` | Find path from from_entity to to_entity | `from_entity`, `to_entity` |\n| `find_orphaned_code` | Find code without callers | None |\n\n**Return Shape:**\n\nReturns markdown-formatted results with entity names, types, file paths, line numbers, signatures, and relationships. The format varies by query type but always includes actionable information like file locations and code structure.\n\n**Example:**\n\n```\nquery_code_graph(query_type=\"find_callers\", entity_name=\"CreateBatch\")\n```\n\n**Digest Usage:**\n\nUse this tool for technical digests that highlight code changes, architectural decisions, or dependency impacts. For example:\n\n- Find all handlers in a module: `query_type=\"find_by_type\", entity_type=\"Handler\"`\n- Trace impact of a change: `query_type=\"find_callers\", entity_name=\"CreateBatch\"`\n- Show module structure: `query_type=\"get_module\", module_name=\"x/ecocredit\"`\n\n---\n\n### resolve_entity\n\nResolve an ambiguous label to a canonical KOI entity. Returns ranked matches with URIs, types, and confidence scores. Use this when you have a label (like \"ethereum\" or \"regen commons\") and need to find the exact entity in the knowledge graph.\n\nThis is the first step in working with the entity graph \u2014 disambiguate the label, get the canonical URI, then use that URI for neighborhood queries and document lookups.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `label` | string | **required** | The label to resolve (e.g., \"ethereum\", \"notion\", \"regen commons\") |\n| `type_hint` | string | \u2014 | Optional type hint to narrow results (e.g., \"TECHNOLOGY\", \"ORGANIZATION\", \"PERSON\") |\n| `limit` | number | 5 | Maximum number of candidates to return (1-20) |\n\n**Return Shape:**\n\nReturns a ranked list of entity candidates with URIs, labels, types, and confidence scores. Each candidate includes enough information to determine which entity the label refers to.\n\n**Example:**\n\n```\nresolve_entity(label=\"ethereum\", type_hint=\"TECHNOLOGY\")\n```\n\n**Digest Usage:**\n\nUse this tool to disambiguate entity names before querying relationships or documents. Useful when building entity-centric digests or when you need to verify that a search query is referring to the correct conceptual entity.\n\n---\n\n### get_entity_neighborhood\n\nGet the graph neighborhood of an entity \u2014 its direct relationships and connected entities. Returns edges with predicates (like \"mentions\", \"relates_to\") and neighboring nodes. Useful for understanding context and connections.\n\nThis tool reveals the web of relationships around a concept, showing what it's connected to and how. It's the graph equivalent of \"tell me everything you know about X.\"\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `label` | string | conditional | Entity label to look up (will be resolved if ambiguous) |\n| `uri` | string | conditional | Entity URI (preferred if known, e.g., from resolve_entity) |\n| `type_hint` | string | \u2014 | Optional type hint for disambiguation when using label |\n| `direction` | enum | `both` | Edge direction: `out` (entity\u2192neighbors), `in` (neighbors\u2192entity), or `both` |\n| `limit` | number | 20 | Maximum number of edges to return (1-100) |\n\n**Note:** Either `label` or `uri` is required.\n\n**Return Shape:**\n\nReturns a list of edges with predicates and neighboring entities. Each edge shows the relationship type and the connected entity with its label and type.\n\n**Example:**\n\n```\nget_entity_neighborhood(label=\"regen network\", limit=50)\n```\n\n**Digest Usage:**\n\nUse this tool to explore conceptual relationships when building thematic digests. For example, to understand the ecosystem around \"credit retirement,\" query its neighborhood to find related concepts, technologies, and organizations. This reveals connections that might not be obvious from document search alone.\n\n---\n\n### get_entity_documents\n\nGet documents associated with an entity. Returns document references (chunks) that mention or relate to the entity. Respects privacy: unauthenticated requests only see public documents.\n\nThis is the bridge from concepts to source material \u2014 given an entity, find all the documents that discuss it.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `label` | string | conditional | Entity label to look up |\n| `uri` | string | conditional | Entity URI (preferred if known) |\n| `type_hint` | string | \u2014 | Optional type hint for disambiguation |\n| `limit` | number | 10 | Maximum number of documents to return (1-50) |\n\n**Note:** Either `label` or `uri` is required.\n\n**Privacy:**\n\n- Without authentication: returns public documents only\n- With `regen_koi_authenticate`: includes private Notion workspace content\n\n**Return Shape:**\n\nReturns a list of document chunks that mention the entity, with RIDs, content previews, sources, and publication dates.\n\n**Example:**\n\n```\nget_entity_documents(label=\"ethereum\", limit=20)\n```\n\n**Digest Usage:**\n\nUse this tool to find source material for entity-centric digests. For example, to write a section on \"what's happening with blockchain integrations,\" resolve the \"blockchain\" entity, get its documents, and summarize recent activity.\n\n---\n\n### sparql_query\n\nExecute raw SPARQL queries against the Regen Knowledge Graph (Apache Jena). Power tool for advanced graph investigations. Use for complex queries not covered by other tools. Prefer `/api/koi/graph` for simple entity lookups or `/api/koi/entity` for resolving labels.\n\nThis is the escape hatch for expert users who need direct access to the RDF triple store.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `query` | string | **required** | The SPARQL query to execute (must be a valid SELECT query) |\n| `format` | enum | `json` | Output format: `json` (structured data) or `table` (human-readable rendering) |\n| `limit` | number | 100 | Maximum result rows to return (1-1000). Overrides LIMIT in query if lower. |\n| `timeout_ms` | number | 30000 | Query timeout in milliseconds (1000-60000) |\n\n**Return Shape:**\n\nReturns SPARQL results in the requested format. JSON format returns structured bindings. Table format returns a human-readable ASCII table.\n\n**Example:**\n\n```\nsparql_query(\n  query=\"SELECT ?s ?p ?o WHERE { ?s ?p ?o } LIMIT 10\",\n  format=\"table\"\n)\n```\n\n**Digest Usage:**\n\nAdvanced use only. Use this when you need to construct custom graph queries that aren't covered by the standard tools. For example, to find all entities of a custom type or to trace complex multi-hop relationships.\n\n---\n\n## RID Operations\n\n### parse_rid\n\nParse a KOI Resource Identifier (RID) into its components per the rid-lib specification. Stateless \u2014 no backend call. Returns: valid (boolean), error (string if invalid), scheme, namespace (null for URI schemes), context (scheme:namespace for ORN/URN, or just scheme for URI schemes like https), reference, rid_type (best-effort heuristic - may be null), uri_components (for HTTP/HTTPS), source_inferred (e.g., \"github\", \"notion\" - heuristic).\n\nThis tool helps you understand RID structure and validate RID format before using RIDs in other tools.\n\n**Parameters:**\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `rid` | string | The RID string to parse (e.g., \"orn:regen.document:notion/page-abc123\", \"orn:slack.message:TEAM/CHANNEL/TS\", \"https://github.com/regen-network/regen-ledger\") |\n\n**Return Shape:**\n\nReturns a parsed RID object with `valid`, `scheme`, `namespace`, `context`, `reference`, `rid_type`, and `source_inferred` fields. If invalid, includes an `error` field with the reason.\n\n**Example:**\n\n```\nparse_rid(rid=\"orn:notion.page:regen/2f725b77-eda1-807d-a63e-c43e6145f7f1\")\n```\n\n**Digest Usage:**\n\nUse this tool to validate RIDs before passing them to `get_full_document` or other RID-based tools. Useful when programmatically constructing RIDs from search results.\n\n---\n\n### kb_rid_lookup\n\nLook up what the Regen KB knows about an RID. Searches indexed documents via `/query` by RID string match. Optionally queries `/entity/neighborhood` for graph edges (best-effort, may return empty). Does NOT implement KOI-net dereference or `/bundles/fetch` \u2014 this is a KB convenience tool. Use `parse_rid` first to validate format.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `rid` | string | **required** | The RID to look up in the knowledge base |\n| `include` | array | `[\"documents\"]` | What to include: `documents` (indexed doc records), `relationships` (graph edges), `chunks` (text chunks) |\n| `limit` | number | 10 | Maximum items per category to return (1-50) |\n\n**Return Shape:**\n\nReturns documents, relationships, and/or chunks associated with the RID, depending on the `include` parameter.\n\n**Example:**\n\n```\nkb_rid_lookup(\n  rid=\"orn:notion.page:regen/abc123\",\n  include=[\"documents\", \"relationships\"],\n  limit=20\n)\n```\n\n**Digest Usage:**\n\nUse this tool to enrich digest content with metadata about documents. For example, after finding a document via search, use this to get its RID-based metadata, relationships, and associated chunks.\n\n---\n\n### kb_list_rids\n\nList RIDs indexed in the Regen KB. Filter by context pattern, source, or date range. Returns aggregation counts. This is a KB discovery tool, NOT KOI-net /rids/fetch (which lists RIDs by type from a node).\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `context` | string | \u2014 | Filter by RID context pattern (e.g., \"orn:regen.document\", \"https\"). Partial match. |\n| `source` | enum | \u2014 | Filter by data source: `notion`, `discourse`, `github`, `slack`, `telegram`, `twitter`, `substack`, `youtube`, `medium` |\n| `indexed_after` | string | \u2014 | Only RIDs indexed after this date (YYYY-MM-DD) |\n| `indexed_before` | string | \u2014 | Only RIDs indexed before this date (YYYY-MM-DD) |\n| `limit` | number | 50 | Maximum RIDs to return (1-200) |\n| `offset` | number | 0 | Pagination offset |\n\n**Return Shape:**\n\nReturns a list of RIDs matching the filters, along with aggregation counts by context and source.\n\n**Example:**\n\n```\nkb_list_rids(\n  context=\"orn:regen.document\",\n  source=\"notion\",\n  indexed_after=\"2026-01-01\",\n  limit=100\n)\n```\n\n**Digest Usage:**\n\nUse this tool to discover what's been indexed recently. For example, to find all Notion pages added in the last week, filter by source and date. This helps identify new content to highlight in digests.\n\n---\n\n## Repository\n\n### get_repo_overview\n\nGet a structured overview of a repository including description, key files (README, CONTRIBUTING, etc.), and links to documentation. Returns a curated summary of the repository's structure and purpose.\n\n**Parameters:**\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `repository` | enum | **required** \u2014 one of: `regen-ledger`, `regen-web`, `regen-data-standards`, `regenie-corpus` |\n\n**Return Shape:**\n\nReturns markdown-formatted repository overview with README content, file structure, documentation links, and key metadata.\n\n**Example:**\n\n```\nget_repo_overview(repository=\"regen-ledger\")\n```\n\n**Digest Usage:**\n\nUse this tool when writing onboarding content or repository-focused digests. Provides context for developers who need to understand a repo's purpose and structure.\n\n---\n\n### get_tech_stack\n\nGet technical stack information for Regen Network repositories including languages, frameworks, dependencies, build tools, and infrastructure. Can show all repos or filter to a specific one.\n\n**Parameters:**\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `repository` | enum | Optional \u2014 one of: `regen-ledger`, `regen-web`, `regen-data-standards`, `regenie-corpus`. Omit to show all repos. |\n\n**Return Shape:**\n\nReturns markdown-formatted tech stack with languages (with file counts), frameworks, key dependencies, and build tools.\n\n**Example:**\n\n```\nget_tech_stack(repository=\"regen-ledger\")\n```\n\n**Digest Usage:**\n\nUse this tool when writing technical summaries or when you need to understand technology choices. Useful for developer-focused digests that highlight stack evolution or dependency updates.\n\n---\n\n## Metadata & Analytics\n\n### get_stats\n\nGet database and index statistics including document counts by source and type. Use this to understand what's in the knowledge base and to discover available sources for filtering.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `detailed` | boolean | false | Include detailed breakdown by source/type |\n\n**Return Shape:**\n\nBasic stats include total entities, documents, repositories, and last updated timestamp. Detailed stats add breakdowns by repository, entity type, and data source.\n\n**Example:**\n\n```\nget_stats(detailed=true)\n```\n\n**Digest Usage:**\n\nUse this tool to understand data coverage and to discover what sources are available. Useful for diagnostic purposes or for understanding the scope of the knowledge base. Include stats in meta-digests that report on the digest system itself.\n\n---\n\n### resolve_metadata_iri\n\nResolve a Regen metadata IRI via the allowlisted resolver (api.regen.network). Caches results for efficient repeated lookups. Returns resolution details including content hash for integrity verification. Use this to verify metadata exists before deriving metrics.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `iri` | string | **required** | The Regen metadata IRI to resolve (e.g., \"regen:13toVfvfM5B7yuJqq8h3iVRHp3PKUJ4ABxHyvn4MeUMwwv1pWQGL295.rdf\") |\n| `force_refresh` | boolean | false | If true, bypass cache and fetch fresh from resolver |\n\n**Return Shape:**\n\nReturns resolution status, content hash, and metadata URL. If resolution fails, includes error details.\n\n**Example:**\n\n```\nresolve_metadata_iri(iri=\"regen:13toVfvfM5B7yuJqq8h3iVRHp3PKUJ4ABxHyvn4MeUMwwv1pWQGL295.rdf\")\n```\n\n**Digest Usage:**\n\nUse this tool when working with on-chain project metadata. For example, when generating digests about ecocredit projects, resolve project metadata IRIs to verify they're accessible and to extract content hashes for citation.\n\n---\n\n### derive_offchain_hectares\n\nDerive project hectares from a Regen metadata IRI with full citation and derivation provenance. Enforces \"no citation, no metric\" policy \u2014 returns `blocked=true` if derivation is not possible. Only returns hectares when a valid citation can be constructed. Use this for accurate, citeable project size metrics.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `iri` | string | **required** | The Regen metadata IRI to derive hectares from |\n| `force_refresh` | boolean | false | If true, bypass cache and re-derive from fresh metadata |\n\n**Return Shape:**\n\nReturns hectares value with full citation, derivation method, confidence level, and warnings. If derivation is blocked, includes explanation of why metrics cannot be extracted.\n\n**Example:**\n\n```\nderive_offchain_hectares(iri=\"regen:13toVfvfM5B7yuJqq8h3iVRHp3PKUJ4ABxHyvn4MeUMwwv1pWQGL295.rdf\")\n```\n\n**Digest Usage:**\n\nUse this tool when generating digests about ecocredit projects that need to include project size metrics. The citation and provenance information ensures transparency about where numbers come from.\n\n---\n\n### analyze_market_trends\n\nAnalyze market trends across credit types with historical data analysis. Provides insights into credit issuance, retirement, and marketplace activity over time.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `time_period` | string | `30d` | Time period for analysis (e.g., \"30d\", \"90d\", \"1y\") |\n| `credit_types` | array | null | Optional array of credit type names to analyze. Omit for all types. |\n\n**Return Shape:**\n\nReturns markdown-formatted analysis with trends, comparisons, and insights about credit marketplace activity.\n\n**Example:**\n\n```\nanalyze_market_trends(time_period=\"90d\", credit_types=[\"C01\", \"C02\"])\n```\n\n**Digest Usage:**\n\nUse this tool for market-focused digests that highlight trends in credit issuance, retirement, and trading. Provides quantitative insights to complement qualitative community updates.\n\n---\n\n### compare_credit_methodologies\n\nCompare different credit class methodologies for impact efficiency analysis. Evaluates and contrasts the approaches, standards, and verification mechanisms across credit classes.\n\n**Parameters:**\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `class_ids` | array | **required** \u2014 array of credit class IDs to compare |\n\n**Return Shape:**\n\nReturns markdown-formatted comparison with methodology descriptions, verification approaches, and impact metrics.\n\n**Example:**\n\n```\ncompare_credit_methodologies(class_ids=[\"C01\", \"C02\", \"C03\"])\n```\n\n**Digest Usage:**\n\nUse this tool for deep-dive digests that explore credit class design decisions and methodology trade-offs. Useful for educational content or strategic analysis.\n\n---\n\n## System\n\n### get_mcp_metrics\n\nGet MCP server performance metrics, cache statistics, and health status. Useful for monitoring and debugging. Returns uptime, tool latencies, cache hit rates, error counts, and circuit breaker status.\n\n**Parameters:**\n\nNone (no parameters required).\n\n**Return Shape:**\n\nReturns markdown-formatted metrics report with uptime, cache statistics (hit rate, hits, misses), API call statistics (total calls, error rate, latency percentiles), and per-tool metrics (query count, success rate, latency distribution).\n\n**Example:**\n\n```\nget_mcp_metrics()\n```\n\n**Digest Usage:**\n\nInclude metrics in meta-digests that report on digest system health. Use to diagnose slow queries or to understand which tools are most heavily used. Useful for operational transparency.\n\n---\n\n### submit_feedback\n\nSubmit feedback about your experience using KOI MCP tools. Helps improve the system. All feedback is stored anonymously with session context.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `rating` | number | **required** | Rating from 1 (poor) to 5 (excellent) |\n| `category` | enum | **required** | Type of feedback: `success`, `partial`, `bug`, `suggestion`, `question`, `other` |\n| `notes` | string | **required** | Detailed feedback, observations, or suggestions (1-5000 characters) |\n| `task_description` | string | \u2014 | Brief description of what you were trying to do |\n| `include_session_context` | boolean | true | Include recent tool calls for debugging context |\n\n**Return Shape:**\n\nReturns confirmation with feedback ID.\n\n**Example:**\n\n```\nsubmit_feedback(\n  rating=5,\n  category=\"success\",\n  notes=\"Found exactly what I needed about basket tokens\",\n  task_description=\"Researching basket token implementation\"\n)\n```\n\n**Digest Usage:**\n\nNot directly used in digest generation. However, feedback about digest quality could be submitted via this tool to improve future digest workflows.\n\n---\n\n### regen_koi_authenticate\n\nAuthenticate with your @regen.network email to access internal Regen Network documentation in addition to public sources. Opens a browser window for secure OAuth login. Authentication token is saved on the server and persists across sessions. Only needs to be done once.\n\n**Parameters:**\n\nNone (opens browser for OAuth flow).\n\n**Return Shape:**\n\nReturns authentication status with session token information.\n\n**Example:**\n\n```\nregen_koi_authenticate()\n```\n\n**Digest Usage:**\n\nRun this tool once at the beginning of a session if you need access to private Notion workspace content for internal digests. Public digests do not require authentication.\n\n---\n\n### setup_claude_config\n\nFetch and display Regen Network CLAUDE.md configuration from the HTTP Config endpoint. This tool retrieves the official configuration for working with Regen Network projects in Claude Code.\n\nThe configuration includes project context and conventions, MCP server setup instructions, domain-specific knowledge (ecocredits, governance, etc.), and available skills and contexts based on your access tier.\n\n**Parameters:**\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `show_available` | boolean | false | If true, show what resources are available at your tier instead of fetching CLAUDE.md content |\n\n**Return Shape:**\n\nWhen `show_available=false` (default), returns the full CLAUDE.md content with installation instructions. When `show_available=true`, returns tier information and available resources.\n\n**Example:**\n\n```\nsetup_claude_config(show_available=true)\n```\n\n**Digest Usage:**\n\nNot directly used in digest generation. This tool is for setting up the Regen Claude configuration in new projects or updating to the latest configuration.\n\n---\n\n## Profile\n\n### get_my_profile\n\nGet your user profile for personalized responses based on your experience level. Returns your profile including experience level (junior, mid, senior, staff, or principal), role (frontend, backend, full-stack, etc.), preferences (response customization), and relationships (who you manage, projects you work on).\n\nIf you haven't set a profile, returns sensible defaults (mid-level with balanced verbosity).\n\n**Parameters:**\n\nNone (retrieves profile for authenticated user).\n\n**Return Shape:**\n\nReturns user profile object with experience level, role, preferences, and relationships.\n\n**Example:**\n\n```\nget_my_profile()\n```\n\n**Digest Usage:**\n\nNot directly used in digest generation. However, profile information could be used to customize digest content based on user preferences (e.g., adjust verbosity, include/exclude certain sections).\n\n---\n\n### update_my_profile\n\nUpdate your user profile to customize how responses are tailored to you. Experience levels affect response verbosity and detail: junior (detailed explanations), mid (balanced), senior (concise), staff/principal (very concise).\n\n**Parameters:**\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `experience_level` | enum | Your experience level: `junior`, `mid`, `senior`, `staff`, `principal` |\n| `role` | string | Your technical role (e.g., frontend, backend, full-stack, devops, data) |\n| `managed_by` | string | Email of your manager (stored in Jena for team queries) |\n| `preferences` | object | Custom preferences: `explain_before_code`, `verbosity`, `show_examples` |\n\n**Return Shape:**\n\nReturns confirmation of profile update.\n\n**Example:**\n\n```\nupdate_my_profile(\n  experience_level=\"senior\",\n  role=\"backend\",\n  preferences={\"verbosity\": \"concise\"}\n)\n```\n\n**Digest Usage:**\n\nNot directly used in digest generation. However, team profiles could be used to customize digest distribution (e.g., send technical digests to backend engineers, community digests to everyone).\n\n---\n\n## Performance & Caching\n\nThe KOI MCP server implements multi-tier caching to optimize performance:\n\n- **Static data** (1 hour): `list_repos`, `get_tech_stack`, `get_repo_overview`\n- **Semi-static** (10 minutes): `find_by_type`, module queries\n- **Dynamic** (5 minutes): `search`, graph traversal\n- **Volatile** (1 minute): `get_stats`, `generate_weekly_digest`\n- **Not cached**: `get_mcp_metrics`, `submit_feedback`, `regen_koi_authenticate`\n\nFirst queries experience cache misses (slower), while subsequent identical queries hit the cache (faster). Check `get_mcp_metrics` to monitor cache hit rates and query latencies.\n\n**Typical Latencies:**\n\n| Tool | Typical Latency | Cached Latency |\n|------|----------------|----------------|\n| `query_code_graph` | 50-200ms | <10ms |\n| `search` | 100-300ms | <10ms |\n| `search_github_docs` | 100-200ms | <10ms |\n| `get_repo_overview` | 50-100ms | <10ms |\n| `get_tech_stack` | 50-100ms | <10ms |\n| `get_stats` | 50-100ms | 50-100ms (1min cache) |\n| `generate_weekly_digest` | 200-500ms | 200-500ms (1min cache) |\n| `get_mcp_metrics` | <10ms | Not cached |\n\n**Good Health Indicators:**\n\n- Error rate < 5%\n- Cache hit rate > 50%\n- p95 latency < 200ms\n- Circuit breaker: closed\n\n---\n\n## Error Handling\n\nAll tools use consistent error formatting. Common errors include:\n\n| Error | Cause | Solution |\n|-------|-------|----------|\n| \"Validation failed\" | Invalid parameters | Check parameter types and formats |\n| \"Circuit breaker is open\" | Backend service down | Wait 60s and retry |\n| \"Timeout after 30000ms\" | Query too complex | Narrow your query |\n| \"Invalid characters\" | SQL/Cypher injection detected | Use only alphanumeric + `_-. ` |\n| \"Required parameter missing\" | Missing required param | Add required parameter |\n| \"Unknown tool\" | Tool name typo | Check tool name spelling |\n| 401 UNAUTHORIZED | Missing internal API key | Check `KOI_INTERNAL_API_KEY` env var |\n| 403 ACCESS_DENIED | Private doc without auth | Use `regen_koi_authenticate` first |\n| 404 DOCUMENT_NOT_FOUND | RID doesn't exist or is private | Verify RID is correct |\n\n---\n\n## Additional Resources\n\n- **User Guide**: [regen-koi-mcp/docs/USER_GUIDE.md](https://github.com/gaiaaiagent/regen-koi-mcp/blob/main/docs/USER_GUIDE.md)\n- **API Reference**: [regen-koi-mcp/docs/API_REFERENCE.md](https://github.com/gaiaaiagent/regen-koi-mcp/blob/main/docs/API_REFERENCE.md)\n- **Deployment Guide**: [regen-koi-mcp/docs/DEPLOYMENT.md](https://github.com/gaiaaiagent/regen-koi-mcp/blob/main/docs/DEPLOYMENT.md)\n- **Tool Routing Guide**: [regen-koi-mcp/TOOL_ROUTING.md](https://github.com/gaiaaiagent/regen-koi-mcp/blob/main/TOOL_ROUTING.md)\n- **GitHub Repository**: https://github.com/gaiaaiagent/regen-koi-mcp\n- **Issues**: https://github.com/gaiaaiagent/regen-koi-mcp/issues\n- **Discord**: https://discord.gg/regen-network\n", "numLines": 936, "startLine": 1, "totalLines": 936}}, "tool_use_id": "toolu_019DKrZ6J5dEg79QrzWyqnfF"}}
{"ts": "2026-02-07T20:17:02.305229", "type": "SubagentStop", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "SubagentStop", "stop_hook_active": false, "agent_id": "a43013b", "agent_transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a/subagents/agent-a43013b.jsonl", "agent_type": "Explore"}}
{"ts": "2026-02-07T20:17:02.345136", "type": "PostToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PostToolUse", "tool_name": "Task", "tool_input": {"description": "Search KOI MCP for ecocredit registry", "prompt": "I need to find what MCP tools are available from the KOI plugin in this project. Look at:\n1. The plugin configuration - check if there's a plugin manifest or tool definitions for the \"koi@regen-ai\" plugin\n2. Check .claude/plugins/ or any cached plugin data\n3. Look at the KOI MCP tool reference documentation at content/docs/reference/koi-mcp-tools.md\n4. Search for any files that describe the KOI MCP tools available\n\nReturn the exact tool names and how they should be invoked.", "subagent_type": "Explore"}, "tool_response": {"status": "completed", "prompt": "I need to find what MCP tools are available from the KOI plugin in this project. Look at:\n1. The plugin configuration - check if there's a plugin manifest or tool definitions for the \"koi@regen-ai\" plugin\n2. Check .claude/plugins/ or any cached plugin data\n3. Look at the KOI MCP tool reference documentation at content/docs/reference/koi-mcp-tools.md\n4. Search for any files that describe the KOI MCP tools available\n\nReturn the exact tool names and how they should be invoked.", "agentId": "a43013b", "content": [{"type": "text", "text": "Perfect! I found the comprehensive KOI MCP tool reference. Let me compile the complete list of available tools for you.\n\n## KOI MCP Tools Available\n\nThe KOI MCP plugin (`koi@regen-ai`) is configured in `.claude/settings.json` and provides **23 tools** organized into 6 categories. Here's the complete reference:\n\n### Search & Discovery Tools\n\n1. **`search`** \u2014 Primary knowledge base search with hybrid RAG (vector + entity + keyword)\n   - Parameters: `query` (required), `intent`, `source`, `sort_by`, `limit`, `published_from`, `published_to`, `include_undated`\n   - Intent types: `general`, `person_activity`, `person_bio`, `technical_howto`, `concept_explain`\n\n2. **`search_github_docs`** \u2014 Search Regen GitHub repositories for documentation\n   - Parameters: `query` (required), `repository`, `limit`\n   - Searches: `regen-ledger`, `regen-web`, `regen-data-standards`, `regenie-corpus`\n\n3. **`generate_weekly_digest`** \u2014 Curated markdown digest of ecosystem activity\n   - Parameters: `start_date`, `end_date`, `save_to_file`, `output_path`, `format`\n\n4. **`get_notebooklm_export`** \u2014 Full comprehensive export with complete content\n   - Parameters: `output_path`\n\n5. **`get_full_document`** \u2014 Retrieve complete document by RID\n   - Parameters: `rid` (required), `output_path`, `include_metadata_header`\n\n### Graph & Entities Tools\n\n6. **`query_code_graph`** \u2014 Search code knowledge graph with multiple query types\n   - Query types: `list_repos`, `find_by_type`, `search_entities`, `keeper_for_msg`, `msgs_for_keeper`, `related_entities`, `list_entity_types`, `get_entity_stats`, `list_concepts`, `explain_concept`, `find_concept_for_query`, `find_callers`, `find_callees`, `find_call_graph`, `list_modules`, `get_module`, `search_modules`, `module_entities`, `module_for_entity`, `trace_call_chain`, `find_orphaned_code`\n\n7. **`resolve_entity`** \u2014 Resolve ambiguous labels to canonical entities\n   - Parameters: `label` (required), `type_hint`, `limit`\n\n8. **`get_entity_neighborhood`** \u2014 Get graph neighborhood and relationships\n   - Parameters: `label` or `uri` (one required), `type_hint`, `direction`, `limit`\n\n9. **`get_entity_documents`** \u2014 Get documents associated with an entity\n   - Parameters: `label` or `uri` (one required), `type_hint`, `limit`\n\n10. **`sparql_query`** \u2014 Raw SPARQL queries against RDF triple store\n    - Parameters: `query` (required), `format`, `limit`, `timeout_ms`\n\n### RID Operations Tools\n\n11. **`parse_rid`** \u2014 Parse KOI Resource Identifiers into components\n    - Parameters: `rid` (required)\n\n12. **`kb_rid_lookup`** \u2014 Look up what KB knows about an RID\n    - Parameters: `rid` (required), `include`, `limit`\n\n13. **`kb_list_rids`** \u2014 List RIDs indexed in the KB with filtering\n    - Parameters: `context`, `source`, `indexed_after`, `indexed_before`, `limit`, `offset`\n\n### Repository Tools\n\n14. **`get_repo_overview`** \u2014 Structured overview of a repository\n    - Parameters: `repository` (required) \u2014 one of: `regen-ledger`, `regen-web`, `regen-data-standards`, `regenie-corpus`\n\n15. **`get_tech_stack`** \u2014 Technical stack information for repositories\n    - Parameters: `repository` (optional)\n\n### Metadata & Analytics Tools\n\n16. **`get_stats`** \u2014 Database and index statistics\n    - Parameters: `detailed` (boolean)\n\n17. **`resolve_metadata_iri`** \u2014 Resolve Regen metadata IRI\n    - Parameters: `iri` (required), `force_refresh`\n\n18. **`derive_offchain_hectares`** \u2014 Derive project hectares from metadata IRI\n    - Parameters: `iri` (required), `force_refresh`\n\n19. **`analyze_market_trends`** \u2014 Analyze credit market trends\n    - Parameters: `time_period`, `credit_types`\n\n20. **`compare_credit_methodologies`** \u2014 Compare credit class methodologies\n    - Parameters: `class_ids` (required)\n\n### System Tools\n\n21. **`get_mcp_metrics`** \u2014 MCP performance metrics and health status\n    - No parameters required\n\n22. **`submit_feedback`** \u2014 Submit feedback about KOI experience\n    - Parameters: `rating` (required), `category` (required), `notes` (required), `task_description`, `include_session_context`\n\n23. **`regen_koi_authenticate`** \u2014 Authenticate for private workspace access\n    - No parameters required (opens OAuth flow)\n\n### Profile Tools\n\n24. **`get_my_profile`** \u2014 Get user profile for personalization\n    - No parameters required\n\n25. **`update_my_profile`** \u2014 Update user profile\n    - Parameters: `experience_level`, `role`, `managed_by`, `preferences`\n\n---\n\n**Key Points:**\n- Tools are located in `regen-ai` marketplace under plugin ID `koi@regen-ai`\n- Invoked via standard MCP tool calling in Claude Code\n- Multi-tier caching: static (1h), semi-static (10min), dynamic (5min), volatile (1min)\n- Typical latencies: 50-500ms first call, <10ms cached\n- Comprehensive error handling with clear error messages\n\nThe complete authoritative reference is at `/home/ygg/Workspace/regenai/regen-heartbeat/content/docs/reference/koi-mcp-tools.md`"}], "totalDurationMs": 32489, "totalTokens": 38914, "totalToolUseCount": 8, "usage": {"input_tokens": 5, "cache_creation_input_tokens": 15238, "cache_read_input_tokens": 22223, "output_tokens": 1448, "server_tool_use": {"web_search_requests": 0, "web_fetch_requests": 0}, "service_tier": "standard", "cache_creation": {"ephemeral_1h_input_tokens": 15238, "ephemeral_5m_input_tokens": 0}}}, "tool_use_id": "toolu_01AjctLYTEUNj9QwD6vNb56D"}}
{"ts": "2026-02-07T20:17:06.838358", "type": "PreToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PreToolUse", "tool_name": "Bash", "tool_input": {"command": "echo \"The KOI MCP search tool needs to be called as an MCP tool, not via bash.\"", "description": "Note about MCP tool invocation"}, "tool_use_id": "toolu_01Vnsdg9nvw5CBzbeLMaQZQY"}}
{"ts": "2026-02-07T20:17:07.313961", "type": "PostToolUse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "PostToolUse", "tool_name": "Bash", "tool_input": {"command": "echo \"The KOI MCP search tool needs to be called as an MCP tool, not via bash.\"", "description": "Note about MCP tool invocation"}, "tool_response": {"stdout": "The KOI MCP search tool needs to be called as an MCP tool, not via bash.", "stderr": "", "interrupted": false, "isImage": false}, "tool_use_id": "toolu_01Vnsdg9nvw5CBzbeLMaQZQY"}}
{"ts": "2026-02-07T20:17:22.884775", "type": "Stop", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "permission_mode": "default", "hook_event_name": "Stop", "stop_hook_active": false}}
{"ts": "2026-02-07T20:17:22.884775", "type": "AssistantResponse", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"response": "I found the KOI MCP tools. The `search` tool is the right one. Let me invoke it directly."}}
{"ts": "2026-02-07T20:17:22.932093", "type": "SessionEnd", "session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "agent_session": 0, "data": {"session_id": "69f96855-d0a7-46aa-8fe8-036dcc732d9a", "transcript_path": "/home/ygg/.claude/projects/-home-ygg-Workspace-regenai-regen-heartbeat/69f96855-d0a7-46aa-8fe8-036dcc732d9a.jsonl", "cwd": "/home/ygg/Workspace/regenai/regen-heartbeat", "hook_event_name": "SessionEnd", "reason": "other"}}
